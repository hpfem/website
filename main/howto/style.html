<html>
<body>

<h2>Hermes Programming Style</h2>

<ul>
<li>
 <b>I. DO NOT use C-style variables</b>
<ul>
<li>
   example: a varible 'i' is declared at the beginning of the function and used in multiple for-loops inside the function
</li>
<li>
   replacement: declare the variable when you use it
</li>
   description: This improves readability of the code because Hermes2d does not follow any naming scheme in this case. 
     Hence, this clearly indicates which variables might carry information outside the loops and which variables just 
     control the loop. Among others, it helps to avoid copy & paste errors in which the same variable is used to control 
     both the inner and the outer loop.
</li>
</ul>
</li>
<li>
 <b>II. DO try to match type of integers</b>
<ul>
<li>
   example: 'for(i = 0; i < bfvol.size(); i++)' where 'i' is declared as 'int i;'
</li>
<li>
   replacement: 'for(unsigned int i = 0; i < bfvol.size(); i++)'
</li>
<li>
   description: This prevents a warning about incompatibility between a signed integer and an unsigned integer. The warning can be disable\
d but it is better to avoid it through a proper type.
</li>
</ul>
</li>
<li>
 <b>III. DO NOT use names without a prefix for preprocessor directives</b>
<ul>
<li>
   example: 'DOMAIN' (bessel.cpp, collides with a directive defined in math.h)
</li>
<li>
   replacement: 'H2DSETUP_DOMAIN'
</li>
<li>
   description: This prevents redefinition warning.
</li>
<li>
   note: Similarly, a directive 'ERROR_SUCCESS'. which is defined in all examples, 
   redefines a directive defined in 'windows.h'.
</li>
</ul>
<li>
 <b>IV. DO remove unreferenced variables</b>
<ul>
<li>
   example: several variables are not used but still they are declared
</li>
<li>
   replacement: remove a variable when a code which uses it was removed
</li>
<li>
   description: This avoids warnings and improves readibility of the code.
</li>
</ul>
</li>
<li>
 <b>V. DO return a value from a function if the function declares a return type</b>
<ul>
<li>
   description: This avoids a warning and it makes the code safer. 
   If at the if-branching inside such a function receives erroneous input,
   the function will return a predefined invalid value rather than some 
   compiler-specific value.
</li>
</ul>
</li>
<li>
 <b>VI. DO NOT use variable-length arrays (VLA)</b>
<ul>
<li>
   example: 'AsmList al[wf->neg];'
</li>
<li>
   replacement: 'AUTOLA_CL(AsmList, al, wf->neq);'
</li>
<li>
   note: If the type is not a class or a structure, a macro 'AUTOLA_OR' can be used instead. This macro does not call constructor and therefore it may allocate the data on stack.
</li>
<li>
   descrition: Variable-length arrays are introduced in C99 which is *not* part of ISO C++. Therefore, MSVC does not support it. Also, the stack has only a limited size and therefore it should not be used similar to the heap.
</li>
</ul>
<li>
 <b>VII. DO explicitly declare types of constants</b>
<ul>
<li>
   example: 'sqrt(2)'
</li>
<li>
   replacement: 'sqrt(2.0)'
</li>
<li>
   descrition: Since C++ allows overloading and the function SQRT has at least two overloads which both allow a valid conversion from an integer. Hence, the compiler might not be able to select between these two.
</li>
</ul>
<li>
 <b>VIII. DO use the macro 'EXTERN' when declaring a public variable, i.e., a variable which is part of API</b>
<ul>
<li>
   example: 'extern int g_max_order;'
</li>
<li>
   replacement: 'EXTERN int g_max_order;'
</li>
<li>
   descrition: In MSVC, Hermes2d is compiled into a DLL. Windows DLL is a stand-alone module which behaves differently from SO on LINUX. All exported symbols has to be explicitly marked by '__declspec(dllexport)' and all imported symbols has to be explicitly marked by '__declspec(dllimport)'. The macro 'EXTERN' does this for you. Please, use it.
</li>
</ul>
<li>
 <b>IX. DO use the macro 'EXTERN' and 'PUBLIC_API' when declaring a public function, i.e., a function which is part of API</b>
<ul>
<li>
   example:<br>
     # declaration: 'extern void warn_order();'<br>
     # definition: 'void warn_order() {...'
</li>
<li>
   replacement:<br>
     # declaration: 'EXTERN void warn_order();'<br>
     # definition: 'PUBLIC_API void warn_order() {...'<br>
   descrition: This is similar to the macro 'EXTERN'.
</li>
</ul>
<li>
 <b>X. DO use the macro 'PUBLIC_API' when declaring a public class which is not a template.</b>
<ul>
<li>
   example: 'class LinSystem'
</li>
<li>
   replacement: 'class PUBLIC_API LinSystem'
</li>
<li>
   descrition: This is similar to the macro 'EXTERN'.
</li>
</ul>
</ul>





</body>
</html>

